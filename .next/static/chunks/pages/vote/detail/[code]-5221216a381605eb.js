(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[744],{2683:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vote/detail/[code]",function(){return n(1772)}])},8385:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=n(5893),a=n(8005);function s(e){return(0,i.jsxs)("div",{className:"w-1/3 flex flex-col items-center justify-center cursor-pointer bg-zinc-100 aspect-square text-zinc-400 hover:bg-sky-500 hover:text-white",onClick:e.onClick,children:[(0,i.jsx)(a.Z,{className:"w-1/3"}),(0,i.jsx)("span",{className:"text-sm",children:"Tambah"})]})}},1206:function(e,t,n){"use strict";n.d(t,{w:function(){return r}});var i=n(5893),a=n(7294),s=n(570),l=n(745);function c(e){var t=(0,a.useState)(e.isOpen),n=t[0],l=t[1];return(0,i.jsxs)("div",{className:"relative z-10 ".concat(!n&&"hidden"),"aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[(0,i.jsx)("div",{className:"fixed inset-0 bg-zinc-900 bg-opacity-40 transition-opacity"}),(0,i.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,i.jsx)("div",{className:"flex min-h-full items-end justify-center text-center sm:items-center sm:p-0",children:(0,i.jsx)("div",{className:"relative transform overflow-hidden bg-white text-left shadow-xl transition-all p-4 rounded-md",children:(0,i.jsxs)("div",{className:"w-full p-5 text-center",children:[(0,i.jsx)("p",{className:"text-2xl font-bold",children:e.title||"Title"}),(0,i.jsx)("p",{className:"text-lg",children:e.subtitle||"Sub Title"}),(0,i.jsxs)("div",{className:"space-x-3 mt-5",children:[(0,i.jsx)("button",{className:"text-sm bg-zinc-100 px-2 py-1 hover:bg-zinc-200",onClick:function(){e.onNegativeClick,l(!1)},children:e.negativeText||"Kembali"}),(0,i.jsx)(s.Z,{className:"".concat(!e.onPositiveClick&&"hidden"),onClick:function(){e.onPositiveClick&&e.onPositiveClick(),l(!1)},size:"sm",text:e.positiveText||"Ya"})]})]})})})})]})}function r(e){var t=document.createElement("div");t.id="alert",document.body.appendChild(t),(0,l.createRoot)(t).render((0,i.jsx)(c,{isOpen:!0,title:e.title,subtitle:e.subtitle,positiveText:e.positiveText,negativeText:e.negativeText,onPositiveClick:e.onPositiveClick,onNegativeClick:e.onNegativeClick}))}},570:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(5893);function a(e){return(0,i.jsx)("button",{disabled:e.isLoading,onClick:function(t){t.preventDefault(),e.onClick()},className:"bg-sky-500 text-white  hover:bg-sky-400 font-bold rounded-md  \n      ".concat(e.className," ").concat("sm"===e.size?"py-1 px-2 text-sm ":"lg"===e.size?"py-3 px-4":"py-2 px-3"),children:e.isLoading?"Loading...":e.text})}},8384:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(1799),a=n(9396),s=n(5893),l=n(7294),c=n(256),r=n(9994);function o(e){var t=(0,l.useState)({key:0,name:"",title:""}),n=t[0],o=t[1];return(0,l.useEffect)(function(){o(e.candidate)},[e.candidate]),(0,l.useEffect)(function(){e.submitCandidate(n)},[n]),(0,s.jsxs)("div",{className:"flex flex-col border border-zinc-100 p-5 shadow-md shadow-zinc-100",children:[(0,s.jsx)("div",{className:"self-end",children:(0,s.jsx)(c.Z,{className:"h-6 w-6 cursor-pointer hover:bg-zinc-100 text-zinc-300",onClick:function(){return e.removeCandidateForm(n.key)}})}),(0,s.jsx)("h1",{className:"flex w-1/2 bg-zinc-100 aspect-square self-center text-center justify-center items-center text-4xl rounded-full",children:e.candidate.key}),(0,s.jsx)("label",{className:"text-sm mt-3 mb-1",children:"Nama Calon Kandidat Ketua"}),(0,s.jsx)(r.Z,{value:n.name,onChange:function(e){o((0,a.Z)((0,i.Z)({},n),{name:e}))},placeholder:"Masukkan Nama Kandidat"})]})}},9994:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(5893);function a(e){return(0,i.jsx)("input",{type:"text",className:" border bg-zinc-100 border-transparent py-2 px-3 ".concat(e.className),placeholder:e.placeholder,onChange:function(t){return e.onChange(t.target.value)},value:e.value})}},2670:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(5893),a=n(3299),s=n(9008),l=n.n(s),c=n(5675),r=n.n(c),o=n(570);function d(){return(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen space-y-5",children:[(0,i.jsx)(l(),{children:(0,i.jsx)("title",{children:"Login"})}),(0,i.jsx)(r(),{src:"/images/yah.png",alt:"thinking",width:200,height:200}),(0,i.jsx)("h1",{className:"text-4xl font-bold",children:"Login Dulu Ya!"}),(0,i.jsx)("h2",{children:"Untuk mengakses halaman ini, kamu wajib login terlebih dahulu"}),(0,i.jsx)(o.Z,{onClick:a.signIn,text:"Login",size:"lg"})]})}},2685:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(8100);function a(e){var t=function(e){return fetch(e).then(function(e){return e.json()})},n=(0,i.ZP)("/api/votes/"+e,t),a=n.data,s=n.mutate,l=n.error;return{vote:null==a?void 0:a.data,isLoading:!l&&!a,mutate:s,isError:l}}},1772:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var i=n(797),a=n(5893),s=n(3299),l=n(9008),c=n.n(l),r=n(5675),o=n.n(r),d=n(1163),u=n(7294),m=n(9198),x=n.n(m),h=n(8385);n(9828);var f=n(570),v=n(8384),p=n(9994),g=n(2670),b=n(2685),j=n(2728),N=n(1664),k=n.n(N),y=n(1206);function w(){var e=(0,d.useRouter)().query.code,t=(0,b.Z)(e),n=t.vote;t.isLoading,t.isError;var l=(0,s.useSession)().data,r=(0,u.useState)(new Date),m=r[0],j=r[1],N=(0,u.useState)(new Date),w=N[0],C=N[1],z=(0,u.useState)([]),Z=z[0],D=z[1],T=(0,u.useState)(""),S=T[0],_=T[1];if((0,u.useEffect)(function(){n&&(_(n.title),j(new Date(n.startDateTime)),C(new Date(n.endDateTime)),D(n.candidates))},[n]),!l)return(0,a.jsx)(g.Z,{});var E=function(){var e={name:"",key:Z.length+1,title:""};D((0,i.Z)(Z).concat([e]))},P=function(e){var t=Z.filter(function(t){return t.key!==e});t.forEach(function(e,t){e.key=t+1}),D(t)},L=function(e){D(Z.map(function(t){return t.key===e.key?e:t}))},K=function(){if(""===S){(0,y.w)({title:"Hmmh",subtitle:"Judul tidak boleh kosong"});return}if(Z.length<2){(0,y.w)({title:"Hmmh",subtitle:"Minimal ada 2 kandidat"});return}if(m>w){(0,y.w)({title:"Hmmh",subtitle:"Tanggal mulai tidak boleh lebih besar dari tanggal selesai"});return}if(Z.some(function(e){return""===e.name})){(0,y.w)({title:"Hmmh",subtitle:"Nama Kandidat tidak boleh kosong"});return}fetch("/api/votes",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e,title:S,startDate:m,endDate:w,candidates:Z.map(function(e){return{name:e.name,title:e.title,key:e.key}}),publisher:l.user.email})}).then(function(e){return e.json()}).then(function(e){(0,y.w)({title:"Yay!",subtitle:"Vote berhasil diubah"})})};return(0,a.jsxs)("div",{children:[(0,a.jsx)(c(),{children:(0,a.jsxs)("title",{children:["Jujurly - ",null==n?void 0:n.title]})}),(0,a.jsxs)("div",{className:"container mx-auto py-10",children:[(0,a.jsx)(o(),{src:"/images/vote.png",alt:"vote",width:200,height:200,objectFit:"contain"}),(0,a.jsx)("h1",{className:"text-4xl font-bold ",children:"Buat Voting Baru"}),(0,a.jsx)("h2",{className:"text-zinc-700 mt-3",children:"Silahkan masukkan data yang dibutuhkan sebelum membuat vote online"}),(0,a.jsxs)("form",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsx)("h3",{className:"font-medium text-xl mt-10",children:"Detail Voting"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"text-sm",children:"Judul"}),(0,a.jsx)(p.Z,{onChange:_,value:S,placeholder:"Contoh : Voting Calon Gubernur Sumatera Utara",className:"w-1/2"})]}),(0,a.jsxs)("div",{className:"flex flex-col w-2/3",children:[(0,a.jsx)("label",{className:"text-sm",children:"Kapan dimulai?"}),(0,a.jsxs)("div",{className:"inline-flex",children:[(0,a.jsx)(x(),{locale:"id",showTimeSelect:!0,dateFormat:"Pp",selected:m,minDate:new Date,onChange:function(e){return e&&j(e)},className:"w-full border bg-zinc-100 border-transparent py-2 px-3"}),(0,a.jsx)("span",{className:"text-sm text-center p-3",children:"sampai"}),(0,a.jsx)(x(),{locale:"id",dateFormat:"Pp",showTimeSelect:!0,selected:w,minDate:m,onChange:function(e){return e&&C(e)},className:"w-full border bg-zinc-100 border-transparent py-2 px-3"})]})]}),(0,a.jsx)("div",{className:"flex flex-col w-1/2",children:(0,a.jsx)("label",{className:"text-sm"})})]}),(0,a.jsx)("h3",{className:"font-medium text-xl mt-10",children:"Kandidat"}),(0,a.jsxs)("div",{className:"grid gap-4 grid-cols-4 mt-5",children:[Z.map(function(e,t){return(0,a.jsx)(v.Z,{candidate:e,submitCandidate:L,removeCandidateForm:P},t)}),(0,a.jsx)(h.Z,{onClick:E})]}),(0,a.jsx)("h3",{className:"font-medium text-xl mt-10",children:"Kode"}),(0,a.jsxs)("div",{className:"bg-zinc-100 p-5",children:["Undang pemilih dengan menggunakan kode",(0,a.jsx)("span",{className:"bg-zinc-200 font-bold py-2 px-3",children:null==n?void 0:n.code}),",",(0,a.jsxs)("p",{children:["Atau gunalan link berikut :"," ",(0,a.jsx)("a",{href:"/participant/".concat(null==n?void 0:n.code),target:"_blank",rel:"noreferrer noopener",className:"text-blue-500",children:"Buka Link"})]})]}),(0,a.jsxs)("div",{className:"py-10 text-right",children:[(0,a.jsx)(k(),{href:"/",children:(0,a.jsx)("a",{className:"text-sm mr-3 hover:text-zinc-500",children:"Kembali"})}),(0,a.jsx)(f.Z,{text:"Update Voting\uD83D\uDC4D\uD83C\uDFFB",size:"lg",onClick:K})]})]})]})]})}(0,m.registerLocale)("id",j.Z)}},function(e){e.O(0,[959,875,786,774,888,179],function(){return e(e.s=2683)}),_N_E=e.O()}]);
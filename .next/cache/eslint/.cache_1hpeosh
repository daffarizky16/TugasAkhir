[{"D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\api\\auth\\[...nextauth].ts":"1","D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\api\\hello.ts":"2","D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\api\\participant\\[code].ts":"3","D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\api\\votes\\index.ts":"4","D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\api\\votes\\[code].ts":"5","D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\index.tsx":"6","D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\login\\index.tsx":"7","D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\participant\\index.tsx":"8","D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\participant\\[...slug].tsx":"9","D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\vote\\create.tsx":"10","D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\vote\\detail\\[code].tsx":"11","D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\vote\\success.tsx":"12","D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\_app.tsx":"13","D:\\DAFFA\\PROGRAM TA\\jujurly\\components\\AddCandidateButton.tsx":"14","D:\\DAFFA\\PROGRAM TA\\jujurly\\components\\Alert.tsx":"15","D:\\DAFFA\\PROGRAM TA\\jujurly\\components\\Button.tsx":"16","D:\\DAFFA\\PROGRAM TA\\jujurly\\components\\CandidateForm.tsx":"17","D:\\DAFFA\\PROGRAM TA\\jujurly\\components\\CandidateItem.tsx":"18","D:\\DAFFA\\PROGRAM TA\\jujurly\\components\\countdown\\CountDown.tsx":"19","D:\\DAFFA\\PROGRAM TA\\jujurly\\components\\countdown\\CountDownRenderer.tsx":"20","D:\\DAFFA\\PROGRAM TA\\jujurly\\components\\Form.tsx":"21","D:\\DAFFA\\PROGRAM TA\\jujurly\\components\\Loading.tsx":"22","D:\\DAFFA\\PROGRAM TA\\jujurly\\components\\Menu.tsx":"23","D:\\DAFFA\\PROGRAM TA\\jujurly\\components\\page\\RestrictedPage.tsx":"24","D:\\DAFFA\\PROGRAM TA\\jujurly\\lib\\code.ts":"25","D:\\DAFFA\\PROGRAM TA\\jujurly\\lib\\prisma.ts":"26","D:\\DAFFA\\PROGRAM TA\\jujurly\\lib\\useParticipant.tsx":"27","D:\\DAFFA\\PROGRAM TA\\jujurly\\lib\\useVote.tsx":"28","D:\\DAFFA\\PROGRAM TA\\jujurly\\lib\\useVotes.tsx":"29","D:\\DAFFA\\PROGRAM TA\\jujurly\\lib\\util.ts":"30"},{"size":647,"mtime":1689405576971,"results":"31","hashOfConfig":"32"},{"size":320,"mtime":1689405576972,"results":"33","hashOfConfig":"32"},{"size":1330,"mtime":1689405576973,"results":"34","hashOfConfig":"32"},{"size":2067,"mtime":1689405576974,"results":"35","hashOfConfig":"32"},{"size":2876,"mtime":1689405576973,"results":"36","hashOfConfig":"32"},{"size":5899,"mtime":1689665324250,"results":"37","hashOfConfig":"32"},{"size":2588,"mtime":1689500977707,"results":"38","hashOfConfig":"32"},{"size":1958,"mtime":1689668307755,"results":"39","hashOfConfig":"32"},{"size":5429,"mtime":1689405576976,"results":"40","hashOfConfig":"32"},{"size":5744,"mtime":1689666722754,"results":"41","hashOfConfig":"32"},{"size":7501,"mtime":1689405576978,"results":"42","hashOfConfig":"32"},{"size":864,"mtime":1689405576979,"results":"43","hashOfConfig":"32"},{"size":401,"mtime":1689405576971,"results":"44","hashOfConfig":"32"},{"size":518,"mtime":1689405576962,"results":"45","hashOfConfig":"32"},{"size":2136,"mtime":1689405576962,"results":"46","hashOfConfig":"32"},{"size":629,"mtime":1689501158108,"results":"47","hashOfConfig":"32"},{"size":1375,"mtime":1689665612230,"results":"48","hashOfConfig":"32"},{"size":1557,"mtime":1689405576963,"results":"49","hashOfConfig":"32"},{"size":1587,"mtime":1689405576965,"results":"50","hashOfConfig":"32"},{"size":1143,"mtime":1689405576966,"results":"51","hashOfConfig":"32"},{"size":442,"mtime":1689405576964,"results":"52","hashOfConfig":"32"},{"size":105,"mtime":1689405576964,"results":"53","hashOfConfig":"32"},{"size":647,"mtime":1689495628931,"results":"54","hashOfConfig":"32"},{"size":641,"mtime":1689667614071,"results":"55","hashOfConfig":"32"},{"size":330,"mtime":1689405576967,"results":"56","hashOfConfig":"32"},{"size":347,"mtime":1689405576968,"results":"57","hashOfConfig":"32"},{"size":373,"mtime":1689405576968,"results":"58","hashOfConfig":"32"},{"size":349,"mtime":1689405576968,"results":"59","hashOfConfig":"32"},{"size":313,"mtime":1689405576969,"results":"60","hashOfConfig":"32"},{"size":266,"mtime":1689405576969,"results":"61","hashOfConfig":"32"},{"filePath":"62","messages":"63","suppressedMessages":"64","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"4votqb",{"filePath":"65","messages":"66","suppressedMessages":"67","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"68","messages":"69","suppressedMessages":"70","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"71","messages":"72","suppressedMessages":"73","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"74","messages":"75","suppressedMessages":"76","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"77","messages":"78","suppressedMessages":"79","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"80","messages":"81","suppressedMessages":"82","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"83","messages":"84","suppressedMessages":"85","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"86","messages":"87","suppressedMessages":"88","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"89"},{"filePath":"90","messages":"91","suppressedMessages":"92","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"93","messages":"94","suppressedMessages":"95","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"96","messages":"97","suppressedMessages":"98","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"99","messages":"100","suppressedMessages":"101","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"102","messages":"103","suppressedMessages":"104","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"105","messages":"106","suppressedMessages":"107","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"108","messages":"109","suppressedMessages":"110","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"111","messages":"112","suppressedMessages":"113","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"114"},{"filePath":"115","messages":"116","suppressedMessages":"117","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"118","messages":"119","suppressedMessages":"120","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"121","messages":"122","suppressedMessages":"123","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"124","messages":"125","suppressedMessages":"126","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"127","messages":"128","suppressedMessages":"129","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"130","messages":"131","suppressedMessages":"132","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"133","messages":"134","suppressedMessages":"135","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"136","messages":"137","suppressedMessages":"138","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"139","messages":"140","suppressedMessages":"141","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"142","messages":"143","suppressedMessages":"144","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"145","messages":"146","suppressedMessages":"147","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"148","messages":"149","suppressedMessages":"150","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"151","messages":"152","suppressedMessages":"153","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\api\\auth\\[...nextauth].ts",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\api\\hello.ts",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\api\\participant\\[code].ts",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\api\\votes\\index.ts",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\api\\votes\\[code].ts",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\index.tsx",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\login\\index.tsx",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\participant\\index.tsx",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\participant\\[...slug].tsx",["154"],[],"import moment from \"moment\";\r\nimport { useSession } from \"next-auth/react\";\r\nimport Head from \"next/head\";\r\nimport { useRouter } from \"next/router\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { CountdownRendererFn } from \"react-countdown/dist/Countdown\";\r\nimport { showAlert } from \"../../components/Alert\";\r\nimport Button from \"../../components/Button\";\r\nimport CandidateItem from \"../../components/CandidateItem\";\r\nimport CountDown from \"../../components/countdown/CountDown\";\r\nimport Menu from \"../../components/Menu\";\r\nimport RestrictedPage from \"../../components/page/RestrictedPage\";\r\nimport useParticipant from \"../../lib/useParticipant\";\r\nimport useVote from \"../../lib/useVote\";\r\n\r\nexport const STATE_NOT_STARTED = \"STATE_NOT_STARTED\",\r\n  STATE_STARTED = \"STATE_STARTED\",\r\n  STATE_ENDED = \"STATE_ENDED\",\r\n  STATE_LOADING = \"STATE_LOADING\";\r\n\r\nexport default function DetailParticipate() {\r\n  const { data: session } = useSession();\r\n\r\n\r\n  const router = useRouter();\r\n  const { slug } = router.query;\r\n  const { vote,mutate:mutateVote, isLoading } = useVote(slug as string);\r\n  const { data: participant,mutate:mutateParticipant, isLoading: participantLoading ,isError} = useParticipant(slug as string)\r\n  const [selectedCandidate, setSelectedCandidate] = useState<Candidate | null>(null);\r\n\r\n  const [currentState, setCurrentState] = useState(STATE_LOADING);\r\n\r\n\r\n  const submitVote = async () => {\r\n    if (selectedCandidate) {\r\n      showAlert({\r\n        title: \"Kamu yakin?\",\r\n        subtitle: \"Kamu akan memilih \" + selectedCandidate.name,\r\n        positiveText: \"Ya, saya yakin\",\r\n        negativeText: \"Tidak\",\r\n        onPositiveClick: async () => {\r\n          const res = await fetch(\"/api/participant/\" + vote?.code, {\r\n            method: \"POST\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify({\r\n              candidate: selectedCandidate.name,\r\n              email: session?.user?.email,\r\n            }),\r\n          });\r\n          if (res.status === 200) {\r\n            mutateParticipant();\r\n            mutateVote();\r\n            showAlert({\r\n              title: \"Vote Terkirim\",\r\n              subtitle: \"terima kasih telah berpartisipasi\",\r\n            })\r\n          }\r\n        },\r\n      })\r\n    }else{\r\n      showAlert({\r\n        title: \"Vote Gagal ❌\"  ,\r\n        subtitle: \"Pilih salah satu kandidat\",\r\n      })\r\n    }\r\n  };\r\n\r\n\r\n  useEffect(() => {\r\n    if (vote) {\r\n      // Check State by Event Time\r\n      if (currentState === STATE_ENDED) {\r\n        return;\r\n      }\r\n      const start = moment(vote?.startDateTime);\r\n      const end = moment(vote?.endDateTime);\r\n\r\n      const interval = setInterval(async () => {\r\n        const now = moment();\r\n\r\n        if (now.isBefore(start)) {\r\n          setCurrentState(STATE_NOT_STARTED);\r\n        } else if (now.isAfter(start) && now.isBefore(end)) {\r\n          setCurrentState(STATE_STARTED);\r\n        } else if (now.isAfter(end)) {\r\n          setCurrentState(STATE_ENDED);\r\n        }\r\n      }, 1000);\r\n\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [vote]);\r\n\r\n  useEffect(() => {\r\n    if (vote && participant) {\r\n      const candidate = vote?.candidates?.find((c) => c.name === participant?.candidate);\r\n      if (candidate) {\r\n        setSelectedCandidate(candidate);\r\n      }\r\n    }\r\n  }, [participant,vote]);\r\n\r\n  if(!session){\r\n    return <RestrictedPage />\r\n  }\r\n  return (\r\n    <div className={`mb-10 ${isLoading && \"animate-pulse\"}`}>\r\n      <Head>\r\n        <title>Mulai Voting</title>\r\n      </Head>\r\n      <Menu />\r\n      <div className=\"container mx-auto\">\r\n        <h1 className=\"text-4xl mt-10 text-center\">{vote?.title}</h1>\r\n        {/* Timer */}\r\n        {vote?.startDateTime && vote?.endDateTime && (\r\n          <CountDown\r\n            start={vote?.startDateTime}\r\n            end={vote?.endDateTime}\r\n            currentState={currentState}\r\n          />\r\n        )}\r\n        {/* End Timer */}\r\n\r\n        {/* Candidate */}\r\n        <div className=\"lg:p-5 mt-10 space-y-3 w-full lg:w-2/3 mx-auto\">\r\n          {!participantLoading && vote?.candidates?.map((candidate: Candidate, index: number) => (\r\n            <CandidateItem\r\n              onClick={() => !participant && currentState === STATE_STARTED && setSelectedCandidate(candidate)}\r\n              isSelected={selectedCandidate?.name === candidate.name}\r\n              name={candidate.name}\r\n              key={candidate.key}\r\n              index={candidate.key}\r\n              title={\"Kandidat \" + candidate.key}\r\n              percentage={candidate.votes ? (candidate.votes / vote?.totalVotes * 100) :0}\r\n            />\r\n          ))}\r\n        </div>\r\n        {/* End Candidate */}\r\n        <div className=\"text-center mt-10\">\r\n          {(session?.user?.email != vote?.publisher )&&!participant && currentState === STATE_STARTED && (\r\n            <Button\r\n              onClick={() => { submitVote() }}\r\n              text=\"Kirim Vote Saya\"\r\n              size=\"lg\"\r\n              isLoading={participantLoading}\r\n            />)}\r\n         {participant && <span className=\"bg-zinc-100 py-2 px-3\">Kamu sudah memilih, dan tidak diperbolehkan untuk mengganti pilihan</span>}\r\n         {session?.user?.email === vote?.publisher && (<span className=\"bg-zinc-100 py-2 px-3\">Pembuat vote tidak dapat melakukan voting</span>)}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\vote\\create.tsx",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\vote\\detail\\[code].tsx",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\vote\\success.tsx",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\pages\\_app.tsx",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\components\\AddCandidateButton.tsx",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\components\\Alert.tsx",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\components\\Button.tsx",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\components\\CandidateForm.tsx",["155"],[],"import { useEffect, useState } from 'react';\r\nimport { XCircleIcon } from '@heroicons/react/24/solid';\r\nimport Form from './Form';\r\ninterface Props {\r\n  candidate: Candidate;\r\n  submitCandidate: (candidate: Candidate) => void;\r\n  removeCandidateForm: (key: number) => void;\r\n}\r\nexport default function CandidateForm(props: Props) {\r\n  const [candidate, setCandidate] = useState<Candidate>({\r\n    key: 0,\r\n    name: '',\r\n    title: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    setCandidate(props.candidate);\r\n  }, [props.candidate]);\r\n\r\n  useEffect(() => {\r\n    //SubmitCandidate\r\n    props.submitCandidate(candidate);\r\n  }, [candidate]);\r\n\r\n  return (\r\n    <div className=\"flex flex-col border border-zinc-100 p-5 shadow-md shadow-zinc-100\">\r\n      <div className=\"self-end\">\r\n        <XCircleIcon className=\"h-6 w-6 cursor-pointer hover:bg-zinc-100 text-zinc-300\" onClick={() => props.removeCandidateForm(candidate.key)} />\r\n      </div>\r\n      <h1 className=\"flex w-1/2 bg-zinc-100 aspect-square self-center text-center justify-center items-center text-4xl rounded-full\">{props.candidate.key}</h1>\r\n      <label className=\"text-sm mt-3 mb-1\">Nama Kandidat</label>\r\n      <Form\r\n        value={candidate.name}\r\n        onChange={(e) => {\r\n          setCandidate({ ...candidate, name: e });\r\n        }}\r\n        placeholder=\"Masukkan Nama Kandidat\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","D:\\DAFFA\\PROGRAM TA\\jujurly\\components\\CandidateItem.tsx",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\components\\countdown\\CountDown.tsx",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\components\\countdown\\CountDownRenderer.tsx",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\components\\Form.tsx",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\components\\Loading.tsx",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\components\\Menu.tsx",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\components\\page\\RestrictedPage.tsx",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\lib\\code.ts",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\lib\\prisma.ts",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\lib\\useParticipant.tsx",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\lib\\useVote.tsx",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\lib\\useVotes.tsx",[],[],"D:\\DAFFA\\PROGRAM TA\\jujurly\\lib\\util.ts",[],[],{"ruleId":"156","severity":1,"message":"157","line":94,"column":6,"nodeType":"158","endLine":94,"endColumn":12,"suggestions":"159"},{"ruleId":"156","severity":1,"message":"160","line":23,"column":6,"nodeType":"158","endLine":23,"endColumn":17,"suggestions":"161"},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'currentState'. Either include it or remove the dependency array.","ArrayExpression",["162"],"React Hook useEffect has a missing dependency: 'props'. Either include it or remove the dependency array. However, 'props' will change when *any* prop changes, so the preferred fix is to destructure the 'props' object outside of the useEffect call and refer to those specific props inside useEffect.",["163"],{"desc":"164","fix":"165"},{"desc":"166","fix":"167"},"Update the dependencies array to be: [currentState, vote]",{"range":"168","text":"169"},"Update the dependencies array to be: [candidate, props]",{"range":"170","text":"171"},[3129,3135],"[currentState, vote]",[618,629],"[candidate, props]"]